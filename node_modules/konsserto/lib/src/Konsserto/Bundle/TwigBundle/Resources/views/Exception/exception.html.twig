{% extends 'TwigBundle:Exception:layout.html.twig' %}

{% block title %}
    {{ message }}
{% endblock title %}

{% block stack_trace %}

    <div class="ks-stacktrace">

        <div class="block">

            <div class="notification flash resize">
                <table>
                    <tr>
                        <td>
                            <strong><abbr>{{ name }}</abbr> : {{ message }} </strong>
                        </td>
                        <td><a href="javascript:void(0);" class="btn large right btn-0" onclick="toggleTrace(0)">+</a></td>
                    </tr>
                </table>
            </div>


            <ul id="global-trace-0" class="traces" style="display: none;">
                {% for source in sources %}
                <li>
                    <div class="notification resize small">
                        <table>
                            <tr>
                                <td>
                                    <strong>{{ loop.index }}.</strong>
                                    {% if source.method is defined and source.method != null %}
                                        <strong>{{ source.method }}</strong>
                                    {% endif %}
                                    at line <strong>{{ source.line }}</strong> in {{ source.file }}
                                </td>
                                <td><a href="javascript:void(0);" class="btn right btn-0-{{ loop.index0 }}" onclick="togglePin(0,{{ loop.index0 }})">+</a></td>
                            </tr>
                        </table>
                    </div>

                    <div class="pin-{{ loop.index0 }}" style="display: none;">
                        <ol start="{{ source.start }}" class="code">
                            {% for scope in source.scopes %}
                                <li {% if ( source.start + loop.index0) == source.line %}class="selected"{% endif %}>
                                    <code>
                                        {{ scope|raw }}
                                    </code>
                                </li>
                            {% endfor %}

                        </ol>
                    </div>
                </li>
                {% endfor %}

            </ul>

        </div>


        <div class="block">

            <div class="notification error resize">
                <table>
                    <tr>
                        <td>
                            <strong><abbr>Stack Trace</abbr> : Plain text </strong>
                        </td>
                        <td><a href="javascript:void(0);" class="btn large right btn-plain" onclick="togglePlain()">-</a></td>
                    </tr>
                </table>
            </div>

            <div class="stacktrace">
                <pre id="global-trace-plain">{{ stack }}</pre>
            </div>

        </div>

    </div>

{% endblock stack_trace %}