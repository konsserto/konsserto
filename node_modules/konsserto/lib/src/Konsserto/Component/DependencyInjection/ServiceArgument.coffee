###
 * This file is part of the Konsserto package.
 *
 * (c) Jessym Reziga <jessym@konsserto.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
###

CONFIG = use('/app/config/config')

#
# ServiceArgument
#
# @author Jessym Reziga <jessym@konsserto.com>
#
class ServiceArgument


	constructor:(@value) ->


	getValue:() ->
		return @value

	setValue:(@value) ->
		return this

	isConfiguration:() ->
		if @getValue().charAt(0) == '%'
			return true
		return false

	getConfigurationValue:() ->
		value = @getValue()
		value.substr(1,value.length-2)

		if CONFIG[value]?
			return CONFIG[value].replace(/'/g,"\\'")

		return 'null'

	getConfiguration:() ->
		if (@isConfiguration())
			@getConfigurationValue()
		else
			throw new Error('You can\'t get the configuration dependency \''+@getValue()+'\', because the argument is not wrapped by %')

	getCompilerArgument:(parameterContainer) ->
		if @isConfiguration()
			return @getConfiguration()
		else
			return parameterContainer+".get('" + @getValue().toLowerCase() + "')"


module.exports = ServiceArgument