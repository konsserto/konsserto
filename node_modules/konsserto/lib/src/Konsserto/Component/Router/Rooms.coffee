###
 * This file is part of the Konsserto package.
 *
 * (c) Marvin Frachet <marvin@konsserto.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
###

#
# Rooms
#
# @author Marvin Frachet <marvin@konsserto.com>
#
class Rooms

  constructor: ()->
    @rooms = []

  exists: (room)->
    if @rooms[room]
      return true
    return false

  contains: (room, socket)->
    if @rooms[room]
      for r in @rooms[room]
        if socket.id == r.id
          return true
    return false

  join: (room, socket)->
    @create room
    if !@contains room, socket
      socket.join room
      @rooms[room].push socket

  leave: (room, socket)->
    if @contains room, socket
      @rooms[room].splice @rooms[room].indexOf(socket), 1
      socket.leave room

  create: (room)->
    if !@exists room
      @rooms[room] = []

  delete: (room)->
    if @exists room
      if @rooms[room].size == 0
        @rooms.splice @rooms.indexOf(room), 1

  get: (room)->
    if @exists room
      return @rooms[room]
    return undefined

  getAll: ()->
    return @rooms

module.exports = Rooms
