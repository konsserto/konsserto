var CONFIG, EntityManager;

CONFIG = use('/app/config/config');

EntityManager = (function() {
  function EntityManager() {
    this.repositories = [];
    this.loadAdapter();
  }

  EntityManager.prototype.getRepository = function(repository) {
    var bundle, realRepository, returnRepository, splittedRepository, vendor;
    splittedRepository = repository.split(':');
    vendor = splittedRepository[0];
    bundle = splittedRepository[1];
    realRepository = splittedRepository[2];
    returnRepository = new use('/src/' + vendor + '/' + bundle + '/Repositories/' + realRepository);
    returnRepository.setAdapter(this.adapter);
    return returnRepository;
  };

  EntityManager.prototype.loadAdapter = function() {
    if (CONFIG.database.driver === 'mysql') {
      return this.adapter = new use('@Konsserto/Component/EntityManager/Adapter/MysqlAdapter');
    } else {
      if (CONFIG.database.driver === 'mongodb') {
        return this.adapter = new use('@Konsserto/Component/EntityManager/Adapter/MongodbAdapter');
      } else {
        return this.adapter = void 0;
      }
    }
  };

  return EntityManager;

})();

module.exports = EntityManager;
