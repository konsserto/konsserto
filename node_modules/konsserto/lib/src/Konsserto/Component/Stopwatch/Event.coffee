###
 * This file is part of the Konsserto package.
 *
 * (c) Marvin Frachet <marvin@konsserto.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
###

###
# Event class in Stopwatch service #
This is the Event class documentation linked to the Stopwatch service
###
Period = use('@Konsserto/Component/Stopwatch/Period')

#
# Event
#
# @author Marvin Frachet <marvin@konsserto.com>
#
class Event


	constructor: (@name, @category)->
		###
    		Instanciation of a new event with the name and category parameter
		###
		@periods = []
		@origin = new Date().getTime()

	stopEvent: ()->
		@stop = new Date().getTime()

	getStopTime: ()->
		return @stop

	getName: ()->
		return @name

	getOrigin: ()->
		return @origin

	getEndTime: ()->
		if @periods.length > 0
			return @periods[@periods.length - 1].getEndTime()
		return null

	getDurationPeriods: ()->
		duration = 0
		for p in @periods
			duration += p.getDuration()
		return duration / 1000

	getDuration: ()->
		return (@stop - @origin) / 1000

	getCategory: ()->
		return @category

	getPeriods: ()->
		return @periods

	setPeriod: ()->
		if @periods.length == 0
			@periods.push(new Period(@origin))
		else
			@periods.push(new Period(@periods[@periods.length - 1].getEndTime()))


module.exports = Event