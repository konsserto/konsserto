###
 * This file is part of the Konsserto package.
 *
 * (c) Jessym Reziga <jessym@konsserto.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
###

#
# InputArgument is a command line argument
#
# @author Jessym Reziga <jessym@konsserto.com>
#
class InputArgument


	@REQUIRED = 1
	@OPTIONAL = 2
	@ARRAY = 4

	constructor:(@name,@mode,@description,cdefault) ->
		@mode = InputArgument.OPTIONAL if !mode
		@setDefault(cdefault)

	getDescription:() ->
		return @description

	getDefault:() ->
		return @default

	getName:() ->
		return @name

	isRequired:() ->
		return @mode == InputArgument.REQUIRED & @mode

	isArray:() ->
		return @mode == InputArgument.ARRAY & @mode

	setDefault:(def) ->

		if @mode == InputArgument.REQUIRED && def != undefined
			throw new Error('Cannot set a default value except for OPTIONNAL mode')

		if @isArray()
			if def == undefined
				def = []
			else if def.constructor.name != 'Array'
				throw new Error('A default value for an array argument must be an array.')

		@default = def


module.exports = InputArgument;