###
 * This file is part of the Konsserto package.
 *
 * (c) Jessym Reziga <jessym@konsserto.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
###

path = use('path')
Security = use('/app/config/security')
Twig = use('ks-twig')

#
# TwigExtension
#
# @author Jessym Reziga <jessym@konsserto.com>
#
class TwigExtension


	constructor:() ->
		if this['getFunctions']?
			@registerMethods(@getFunctions())

		if this['getFilters']?
			@registerMethods(@getFilters())


	registerMethods:(methods) ->
		for method in methods
			if method.access.constructor.name == 'TwigFunctionMethod'
				Twig.extendFunction(method.name,method.access.getMethod())
			else if method.access.constructor.name == 'TwigFilterMethod'
				Twig.extendFilter(method.name,method.access.getMethod())
			else
				throw new Error('Unable to handle such extension :'+method.access.constructor.name)


module.exports = TwigExtension